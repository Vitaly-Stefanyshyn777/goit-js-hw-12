import{a as y,i as t,S as m}from"./assets/vendor-DjDxajEQ.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function f(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(e){if(e.ep)return;e.ep=!0;const i=f(e);fetch(e.href,i)}})();y.defaults.baseURL="https://pixabay.com/api";const k="45109890-d15cee52eedc615dd4ac8bedf";async function E({q:o,page:s,per_page:f}){const n=new URLSearchParams({key:k,q:o,image_type:"photo",orientation:"horizontal",safesearch:!0,page:s,per_page:f});try{const e=await y.get("?",{params:n});if(e.status!==200)throw new Error(`Server responded with status ${e.status}`);return console.log("API Response Data:",e.data),e.data}catch(e){throw e.response?(console.error("Server Response Error:",e.response.data),t.error({message:`Помилка сервера: ${e.response.status}`,position:"topRight",messageColor:"#ffffff",backgroundColor:"#EF4040"})):e.request?(console.error("No response received:",e.request),t.error({message:"Не отримано відповіді від сервера.",position:"topRight",messageColor:"#ffffff",backgroundColor:"#EF4040"})):(console.error("Error",e.message),t.error({message:`Помилка: ${e.message}`,position:"topRight",messageColor:"#ffffff",backgroundColor:"#EF4040"})),e}}const l={searchForm:document.querySelector(".js-form-container"),cardBox:document.querySelector(".card-container"),loader:document.querySelector(".js-loader"),loadMoreBtn:document.querySelector('[data-action="load-more"]')};l.cardBox.addEventListener("click",o=>o.preventDefault());function L(){l.loader.style.display="inline-block"}function g(){l.loader.style.display="none"}let h=0;const F=10;function S(o){h<F&&(t.error({message:"Не вдалося завантажити зображення.",position:"topRight",messageColor:"#ffffff",backgroundColor:"#EF4040"}),h++),o.target.src="/fallback.jpg"}function C(o){const s=o.map(({webformatURL:n,largeImageURL:e,tags:i,likes:d,views:w,comments:x,downloads:R})=>`<li class="list-group-item scrol">
          <div class="search-card">
            <div class="card-img-box">
              <a class="card-link" href="${e}">
                <img class="card-img" src="${n}" alt="${i}">
              </a>
            </div>
            <div class="card-box-text">
              <p class="card-text">Likes<br><span>${d}</span></p>
              <p class="card-text">Views<br><span>${w}</span></p>
              <p class="card-text">Comments<br><span>${x}</span></p>
              <p class="card-text">Downloads<br><span>${R}</span></p>
            </div>
          </div>
        </li>`).join("");l.cardBox.insertAdjacentHTML("beforeend",s),l.cardBox.querySelectorAll(".card-img").forEach(n=>{n.addEventListener("error",S)})}class P{constructor(s,f){this.buttonEL=s,this.hiddenClass=f}hide(){this.buttonEL.classList.add(this.hiddenClass)}show(){this.buttonEL.classList.remove(this.hiddenClass)}disable(){this.buttonEL.disabled=!0}enable(){this.buttonEL.disabled=!1}}let c=null;const r=new P(l.loadMoreBtn,"is-hidden");r.hide();const a={q:"",page:1,per_page:15,maxPage:0};let p=!0;function u(){navigator.onLine?(p||t.success({message:"Інтернет-з'єднання відновлено.",position:"topRight",messageColor:"#ffffff",backgroundColor:"#4CAF50"}),c?c.refresh():c=new m(".card-container a",{captionsData:"alt",captionDelay:250,overlayOpacity:.9}),l.cardBox.querySelectorAll(".card-img").forEach(s=>{s.parentElement.removeEventListener("click",b)}),a.maxPage>0&&a.page<a.maxPage&&r.show()):(t.error({message:"Відсутнє інтернет-з'єднання.",position:"topRight",messageColor:"#ffffff",backgroundColor:"#EF4040"}),c&&(c.destroy(),c=null),l.cardBox.querySelectorAll(".card-img").forEach(s=>{s.parentElement.addEventListener("click",b)}),r.hide()),p&&(p=!1)}window.addEventListener("online",u);window.addEventListener("offline",u);u();l.searchForm.addEventListener("submit",q);async function q(o){o.preventDefault(),l.cardBox.innerHTML="";const s=o.currentTarget;if(a.q=s.elements.search.value.toLowerCase().trim(),console.log("Form submitted"),console.log("Search term:",a.q),!a.q){t.error({message:"Будь ласка, введіть дані в поле.",position:"topRight",messageColor:"#ffffff",backgroundColor:"#EF4040"}),r.hide(),g(),a.page=1,a.maxPage=0;return}if(!navigator.onLine){t.error({message:"Відсутнє інтернет-з'єднання.",position:"topRight",messageColor:"#ffffff",backgroundColor:"#EF4040"}),r.hide(),g();return}r.hide(),r.disable(),a.page=1;try{L();const{total:f,hits:n}=await E(a);if(console.log("API Response:",{total:f,hits:n}),a.maxPage=Math.ceil(f/a.per_page),!n.length){t.error({message:"На жаль, не знайдено зображень за вашим запитом. Спробуйте інше!",position:"topRight",messageColor:"#ffffff",backgroundColor:"#EF4040"}),r.hide(),g();return}C(n),navigator.onLine&&(c?c.refresh():c=new m(".card-container a",{captionsData:"alt",captionDelay:250,overlayOpacity:.9})),a.page<a.maxPage?(r.show(),r.enable(),l.loadMoreBtn.addEventListener("click",v)):r.hide()}catch(f){r.hide(),t.error({message:`Сталася помилка: ${f.message}`,position:"topRight",messageColor:"#ffffff",backgroundColor:"#EF4040"})}finally{g(),s.reset()}}async function v(){if(!navigator.onLine){t.error({message:"Відсутнє інтернет-з'єднання.",position:"topRight",messageColor:"#ffffff",backgroundColor:"#EF4040"}),r.hide();return}r.disable();try{L(),a.page+=1;const{hits:o}=await E(a);if(console.log("Load More API Response:",o),!o.length){t.info({message:"Ви досягли кінця результатів пошуку.",position:"topRight"}),r.hide(),l.loadMoreBtn.removeEventListener("click",v);return}C(o),navigator.onLine&&(c?c.refresh():c=new m(".card-container a",{captionsData:"alt",captionDelay:250,overlayOpacity:.9})),a.page<a.maxPage?(r.show(),r.enable()):r.hide()}catch(o){r.hide(),t.error({message:`Сталася помилка: ${o.message}`,position:"topRight",messageColor:"#ffffff",backgroundColor:"#EF4040"})}finally{g()}}function b(o){o.preventDefault(),t.error({message:"Не вдалося відкрити зображення. Відсутнє інтернет-з'єднання.",position:"topRight",messageColor:"#ffffff",backgroundColor:"#EF4040"})}
//# sourceMappingURL=index.js.map
