{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/refs.js","../src/js/render-functions.js","../src/js/loadMoreBtn.js","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nconst API_KEY = '45109890-d15cee52eedc615dd4ac8bedf';\n\nasync function searchImagesPixaby({ q, page, per_page }) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: per_page,\n  });\n\n  return await axios\n    .get('?', { params })\n    .then(({ data }) => data)\n    .catch(err => console.log(err));\n}\n\nexport { searchImagesPixaby };\n","export default {\n  searchForm: document.querySelector('.js-form-container'),\n  cardBox: document.querySelector('.card-container'),\n  loader: document.querySelector('.js-loader'),\n  loadMoreBtn: document.querySelector('[data-action=\"load-more\"]'),\n  elem: document.querySelector('.scrol'),\n};\n","'use strict';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport refs from './refs';\n\nrefs.cardBox.addEventListener('click', event => event.preventDefault());\n\nfunction showLoader() {\n  refs.loader.style.display = 'inline-block';\n}\n\nfunction hideLoader() {\n  refs.loader.style.display = 'none';\n}\n\nfunction renderSearcCard(data) {\n  const createCardCode = data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"list-group-item scrol\"><div class=\"search-card\">\n   <div class=\"card-img-box\">\n     <a clas=\"card-link\" href=\"${largeImageURL}\"><img class=\"card-img\" src=\"${webformatURL}\" alt=\"${tags}\"></a>\n   </div>\n   <div class=\"card-box-text\">\n     <p class=\"card-text\">Likes<br><span>${likes}</span></p>\n     <p class=\"card-text\">Views<br><span>${views}</span></p>\n     <p class=\"card-text\">Comments<br><span>${comments}</span></p>\n     <p class=\"card-text\">Downloads<br><span>${downloads}</span></p>\n   </div>\n</div></li>`;\n      }\n    )\n    .join('');\n\n  refs.cardBox.insertAdjacentHTML('beforeend', createCardCode);\n  const gallery = new SimpleLightbox('.card-container a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    overlayOpacity: 0.9,\n  });\n  gallery.refresh();\n}\n\nexport { renderSearcCard, showLoader, hideLoader };\n","export default class ButtonService {\n  constructor(buttonEL, hiddenClass) {\n    this.buttonEL = buttonEL;\n    this.hiddenClass = hiddenClass;\n  }\n\n  hide() {\n    this.buttonEL.classList.add(this.hiddenClass);\n  }\n\n  show() {\n    this.buttonEL.classList.remove(this.hiddenClass);\n  }\n\n  disable() {\n    this.buttonEL.disabled = true;\n  }\n\n  enable() {\n    this.buttonEL.disabled = false;\n  }\n}\n","'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchImagesPixaby } from './js/pixabay-api.js';\nimport {\n  renderSearcCard,\n  showLoader,\n  hideLoader,\n} from './js/render-functions.js';\nimport refs from './js/refs.js';\nimport ButtonService from './js/loadMoreBtn';\n\nconst loadMoreBtn = new ButtonService(refs.loadMoreBtn, 'is-hidden');\n\nloadMoreBtn.hide();\n\nconst params = {\n  q: '',\n  page: 1,\n  per_page: 15,\n  maxPage: 0,\n};\n\nrefs.searchForm.addEventListener('submit', hendleSearch);\n\nasync function hendleSearch(event) {\n  event.preventDefault();\n  refs.cardBox.innerHTML = \"\";\n  const form = event.currentTarget;\n  params.q = form.elements.search.value.toLowerCase().trim(); // Додано trim()\n\n  if (!params.q) {\n    // Додана перевірка на пустий інпут\n    iziToast.error({\n      message: `Please enter the data in the input field`,\n      position: \"topRight\",\n      messageColor: \"#ffffff\",\n      backgroundColor: \"#EF4040\",\n    });\n    loadMoreBtn.hide();\n    hideLoader();\n    return; // Вихід з функції, якщо інпут пустий\n  }\n\n  loadMoreBtn.show();\n  loadMoreBtn.disable();\n  params.page = 1;\n\n  try {\n    showLoader();\n    const { total, hits } = await searchImagesPixaby(params);\n    params.maxPage = Math.ceil(total / params.per_page);\n\n    if (params.maxPage > 1) {\n      loadMoreBtn.enable();\n      refs.loadMoreBtn.addEventListener(\"click\", handleLoadMore);\n    } else {\n      loadMoreBtn.hide();\n    }\n    if (!hits.length) {\n      loadMoreBtn.disable();\n      iziToast.error({\n        message: `Sorry, there are no images matching<br>your search query. Please try again!`,\n        position: \"topRight\",\n        messageColor: \"#ffffff\",\n        backgroundColor: \"#EF4040\",\n      });\n      return;\n    }\n\n    if (!params.q) {\n      loadMoreBtn.hide();\n      iziToast.error({\n        message: `Please enter the data in the input field`,\n        position: \"topRight\",\n        messageColor: \"#ffffff\",\n        backgroundColor: \"#EF4040\",\n      });\n      return;\n    }\n\n    renderSearcCard(hits);\n  } catch (err) {\n    iziToast.error({\n      message: `${err.message}`,\n      position: \"topRight\",\n      messageColor: \"#ffffff\",\n      backgroundColor: \"#EF4040\",\n    });\n  } finally {\n    hideLoader();\n    if (params.page === params.maxPage) {\n      loadMoreBtn.hide();\n      refs.loadMoreBtn.removeEventListener(\"click\", handleLoadMore);\n    } else {\n      loadMoreBtn.enable();\n    }\n    form.reset();\n  }\n}\n\nasync function handleLoadMore() {\n  loadMoreBtn.disable();\n  params.page += 1;\n\n  try {\n    showLoader();\n    const { hits } = await searchImagesPixaby(params);\n    renderSearcCard(hits);\n\n    // Логіка для прокрутки\n  } catch (err) {\n    iziToast.error({\n      message: `${err.message}`,\n      position: \"topRight\",\n      messageColor: \"#ffffff\",\n      backgroundColor: \"#EF4040\",\n    });\n    loadMoreBtn.hide(); // Додано: ховаємо кнопку при помилці\n  } finally {\n    hideLoader();\n    if (params.page === params.maxPage) {\n      iziToast.success({\n        message: \"We're sorry, but you've reached the end of search results\",\n        position: \"topRight\",\n      });\n      loadMoreBtn.hide(); // Додано: ховаємо кнопку, коли досягнута остання сторінка\n    } else {\n      loadMoreBtn.enable();\n    }\n  }\n}\n"],"names":["axios","API_KEY","searchImagesPixaby","q","page","per_page","params","data","err","refs","event","showLoader","hideLoader","renderSearcCard","createCardCode","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","ButtonService","buttonEL","hiddenClass","loadMoreBtn","hendleSearch","form","iziToast","total","hits","handleLoadMore"],"mappings":"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"}